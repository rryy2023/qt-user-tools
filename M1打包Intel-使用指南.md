# M1 Mac æ‰“åŒ… Intel ç‰ˆæœ¬ - ä½¿ç”¨æŒ‡å—

## âœ… å·²è§£å†³çš„é—®é¢˜

1. **è¯­æ³•é”™è¯¯** - å·²ä¿®å¤æ„å»ºè„šæœ¬çš„ if-else é€»è¾‘
2. **è™šæ‹Ÿç¯å¢ƒæ”¯æŒ** - è„šæœ¬ç°åœ¨è‡ªåŠ¨æ£€æµ‹å¹¶ä½¿ç”¨ `venv_x86_64` è™šæ‹Ÿç¯å¢ƒ
3. **ä¾èµ–æ¶æ„** - è™šæ‹Ÿç¯å¢ƒä¸­çš„ä¾èµ–å·²ç»æ˜¯ x86_64 æ¶æ„

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ­¥éª¤ 1ï¼šåˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰

```bash
# åˆ›å»º x86_64 è™šæ‹Ÿç¯å¢ƒ
arch -x86_64 python3 -m venv venv_x86_64

# åœ¨è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…ä¾èµ–
source venv_x86_64/bin/activate
pip install -r requirements.txt
deactivate
```

æˆ–ä½¿ç”¨è‡ªåŠ¨è„šæœ¬ï¼š

```bash
./åˆ›å»ºIntelè™šæ‹Ÿç¯å¢ƒ.sh
```

### æ­¥éª¤ 2ï¼šæ‰“åŒ… Intel ç‰ˆæœ¬

```bash
./build_all_platforms.sh --mac-intel
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- æ£€æµ‹è™šæ‹Ÿç¯å¢ƒ `venv_x86_64`
- ä½¿ç”¨ `arch -x86_64` è¿è¡Œè™šæ‹Ÿç¯å¢ƒä¸­çš„ Python
- éªŒè¯æ¶æ„ä¸º x86_64
- è¿›è¡Œæ‰“åŒ…

## ğŸ“‹ å½“å‰çŠ¶æ€

### å·²éªŒè¯

- âœ… Rosetta 2 å·²å®‰è£…
- âœ… è™šæ‹Ÿç¯å¢ƒå·²åˆ›å»ºï¼š`venv_x86_64`
- âœ… è™šæ‹Ÿç¯å¢ƒæ¶æ„ï¼šx86_64
- âœ… ä¾èµ–æ¶æ„ï¼šx86_64ï¼ˆ_cffi_backend, PyQt6, lxml ç­‰ï¼‰

### æ‰“åŒ…è¿›è¡Œä¸­

æ‰“åŒ…è¿‡ç¨‹å¯èƒ½éœ€è¦ 5-10 åˆ†é’Ÿï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚

## ğŸ” éªŒè¯æ‰“åŒ…ç»“æœ

æ‰“åŒ…å®Œæˆåï¼Œæ£€æŸ¥ç”Ÿæˆçš„æ–‡ä»¶ï¼š

```bash
# æ£€æŸ¥ app æ¶æ„
file dist/mac_intel/åƒå›¾ç½‘é—®é¢˜è§£å†³å·¥å…·.app/Contents/MacOS/åƒå›¾ç½‘é—®é¢˜è§£å†³å·¥å…·

# åº”è¯¥æ˜¾ç¤º: Mach-O 64-bit executable x86_64

# æŸ¥çœ‹è¾“å‡ºæ–‡ä»¶
ls -lh dist/mac_intel/
```

## ğŸ“¦ è¾“å‡ºæ–‡ä»¶

æ‰“åŒ…æˆåŠŸåä¼šç”Ÿæˆï¼š

- `dist/mac_intel/åƒå›¾ç½‘é—®é¢˜è§£å†³å·¥å…·.app` - åº”ç”¨åŒ…
- `dist/mac_intel/QiantuTroubleshooter_v0.0.1_macOS-Intel.dmg` - DMG å®‰è£…åŒ…
- `dist/mac_intel/QiantuTroubleshooter_v0.0.1_macOS-Intel.zip` - ZIP å‹ç¼©åŒ…

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **é¦–æ¬¡æ‰“åŒ…**ï¼šå¯èƒ½éœ€è¦ 5-10 åˆ†é’Ÿ
2. **è™šæ‹Ÿç¯å¢ƒ**ï¼šç¡®ä¿ `venv_x86_64` ç›®å½•å­˜åœ¨ä¸”åŒ…å«ä¾èµ–
3. **æ¶æ„éªŒè¯**ï¼šå¦‚æœæ‰“åŒ…å¤±è´¥ï¼Œæ£€æŸ¥ä¾èµ–æ¶æ„æ˜¯å¦æ­£ç¡®

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¦‚æœæ‰“åŒ…å¤±è´¥

1. **æ£€æŸ¥è™šæ‹Ÿç¯å¢ƒ**ï¼š
   ```bash
   arch -x86_64 venv_x86_64/bin/python3 -c "import platform; print(platform.machine())"
   # åº”è¯¥è¾“å‡º: x86_64
   ```

2. **é‡æ–°å®‰è£…ä¾èµ–**ï¼š
   ```bash
   source venv_x86_64/bin/activate
   pip install --force-reinstall -r requirements.txt
   deactivate
   ```

3. **æ£€æŸ¥ä¾èµ–æ¶æ„**ï¼š
   ```bash
   arch -x86_64 venv_x86_64/bin/python3 -c "
   import _cffi_backend
   import os
   print(os.popen('file ' + _cffi_backend.__file__).read())
   "
   # åº”è¯¥æ˜¾ç¤º: x86_64
   ```

## ğŸ“ ç›¸å…³æ–‡ä»¶

- `build_all_platforms.sh` - ä¸»æ„å»ºè„šæœ¬ï¼ˆå·²æ›´æ–°æ”¯æŒè™šæ‹Ÿç¯å¢ƒï¼‰
- `åˆ›å»ºIntelè™šæ‹Ÿç¯å¢ƒ.sh` - è‡ªåŠ¨åˆ›å»ºè™šæ‹Ÿç¯å¢ƒè„šæœ¬
- `M1æ‰“åŒ…Intelè§£å†³æ–¹æ¡ˆ.md` - è¯¦ç»†è§£å†³æ–¹æ¡ˆæ–‡æ¡£
- `M1æ‰“åŒ…Intel-å¿«é€ŸæŒ‡å—.md` - å¿«é€Ÿå‚è€ƒæŒ‡å—
